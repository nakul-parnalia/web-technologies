<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Live Esports Dashboard</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #1a1a1d; color: white; text-align: center; padding-top: 50px; }
        
        .dashboard {
            background: #4e4e50;
            width: 400px;
            margin: 0 auto;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(195, 7, 63, 0.5);
            border: 2px solid #c3073f;
        }

        h1 { margin: 0; color: #c3073f; text-transform: uppercase; }
        .status { color: #6fbf73; font-size: 0.9em; margin-bottom: 20px; }

        .stats-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin: 20px 0; }
        .stat-box { background: #1a1a1d; padding: 15px; border-radius: 5px; }
        .stat-label { font-size: 0.8em; color: #aaa; }
        .stat-value { font-size: 1.5em; font-weight: bold; color: white; display: block; }

        button {
            background: #c3073f; color: white; border: none; padding: 10px 20px;
            font-size: 1em; cursor: pointer; border-radius: 5px; transition: 0.3s;
        }
        button:hover { background: #950740; }
        
        /* Loading Animation Class */
        .loading { opacity: 0.5; pointer-events: none; }
    </style>
</head>
<body>

    <div class="dashboard">
        <h1>Match Monitor</h1>
        <p class="status">ðŸ”´ LIVE | Erangel</p>

        <div class="stats-grid">
            <div class="stat-box">
                <span class="stat-label">KILLS</span>
                <span id="kills" class="stat-value">0</span>
            </div>
            <div class="stat-box">
                <span class="stat-label">ALIVE</span>
                <span id="alive" class="stat-value">--</span>
            </div>
            <div class="stat-box">
                <span class="stat-label">DAMAGE</span>
                <span id="damage" class="stat-value">0</span>
            </div>
        </div>

        <p style="font-size: 0.8em; color: #888;">Last Update: <span id="time">--:--:--</span></p>

        <!-- The Trigger Button -->
        <button id="refreshBtn" onclick="fetchLiveStats()">ðŸ”„ Refresh Data</button>
    </div>

    <script>
        // The AJAX Function
        async function fetchLiveStats() {
            const btn = document.getElementById('refreshBtn');
            const killsEl = document.getElementById('kills');
            const aliveEl = document.getElementById('alive');
            const damageEl = document.getElementById('damage');
            const timeEl = document.getElementById('time');

            // 1. UI Feedback: Show loading state
            btn.innerText = "Connecting...";
            btn.classList.add('loading');

            try {
                // 2. AJAX Call: Fetch data from the PHP file asynchronously
                const response = await fetch('live_stats.php');
                
                // 3. Convert response to JSON
                const data = await response.json();

                // 4. Update the DOM (The HTML elements)
                killsEl.innerText = data.kills;
                aliveEl.innerText = data.alive;
                damageEl.innerText = data.damage;
                timeEl.innerText = data.timestamp;

                console.log("Data received:", data);

            } catch (error) {
                console.error("Error fetching stats:", error);
                btn.innerText = "Error!";
            } finally {
                // 5. Reset Button state
                btn.innerText = "ðŸ”„ Refresh Data";
                btn.classList.remove('loading');
            }
        }
    </script>
</body>
</html>
